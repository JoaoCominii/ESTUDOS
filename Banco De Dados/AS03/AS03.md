# Materia do AS03 resumida
- Slides 13, 14, 15

## Parte 1: A Teoria por Trás da Eficiência
Imagine um banco de dados como uma imensa biblioteca com milhões de livros. Se você precisasse encontrar um livro específico sem nenhuma organização, teria que olhar prateleira por prateleira, livro por livro. Seria uma tarefa absurdamente lenta. Os índices funcionam como o catálogo de fichas (ou o sistema de busca online) da biblioteca: uma estrutura otimizada que te diz exatamente em qual corredor e prateleira seu livro está, economizando um tempo gigantesco.

### Lição 1: Onde os "Livros" Ficam Guardados (Tecnologias de Armazenamento)
Antes de organizar os dados, precisamos saber onde eles são fisicamente guardados. É disso que trata o primeiro slide.
- **O Problema da Velocidade:** Computadores têm memórias muito rápidas (RAM) e armazenamentos mais lentos, porém permanentes (como HDs e SSDs). Os dados de um banco de dados ficam no armazenamento permanente, que é ordens de magnitude mais lento. O grande objetivo é minimizar o número de vezes que precisamos acessar esse armazenamento lento.
- **RAID (Redundant Array of Independent Disks):** Para melhorar o desempenho e a segurança, podemos usar uma tecnologia chamada RAID, que combina vários discos físicos para funcionarem como uma unidade lógica. Existem diferentes "níveis" de RAID: (Tecnologias de Armazenamento - Pg 6)
    1. **RAID 0:** Foca em **desempenho**. Ele distribui os dados entre os discos, permitindo ler e escrever em paralelo, o que acelera muito as coisas. A desvantagem é que não há redundância; se um disco falhar, todos os dados são perdidos. (Tecnologias de Armazenamento - Pg 6/7)
    2. **RAID 1:** Foca em **redundância (confiabilidade)**. Ele espelha os dados, ou seja, cria uma cópia idêntica em outro disco. Se um disco falhar, o outro assume sem perda de dados. (Tecnologias de Armazenamento - Pg 8)
    3. **RAID 5 e 10:** São soluções híbridas que tentam equilibrar desempenho e redundância. (Tecnologias de Armazenamento - Pg 9/10)
O ponto principal aqui é: o acesso ao disco é caro (lento), e os engenheiros de banco de dados criaram muitas estratégias de hardware para mitigar isso. Nossa estratégia, no entanto, será de software, através da **indexação.**

### Lição 2: Criando o "Catálogo da Biblioteca" (Indexação de Nível Único)
É aqui que a mágica acontece. Um índice é, essencialmente, um arquivo auxiliar, pequeno e ordenado, que contém duas coisas: uma "chave" (o valor que você quer buscar, como o CPF de um cliente) e um "ponteiro" (o endereço exato no disco onde o registro completo daquele cliente está).
(Indexacao nivel unico - Pg 3)
-Três tipos principais de índices de nível único:
1. **Índice Primário:**
   - **O que é?** É o índice principal, construído sobre a chave primária da tabela (ex: CPF na tabela Clientes). (Indexacao nivel unico - Pg 5)
   - **Como funciona?** Ele exige que o arquivo de dados principal esteja fisicamente **ordenado** por essa chave primária. (Indexacao nivel unico - Pg 5)
   - **Característica Chave:** É um índice **esparso**. Isso significa que ele não tem uma entrada para cada registro da tabela. Em vez disso, ele tem uma entrada para cada bloco de disco do arquivo de dados, apontando para o primeiro registro daquele bloco. Isso o torna extremamente compacto. (Indexacao nivel unico - Pg 5)
2. **Índice de Agrupamento (Clustering):**
   - **O que é?** É parecido com o primário, mas é construído sobre um campo que não é a chave primária, mas pelo qual os dados estão fisicamente ordenados. Por exemplo, se ordenássemos a tabela Funcionarios por Departamento. (Indexacao nivel unico - Pg 9)
   - **Característica Chave:** Também é **esparso**. Possui uma entrada para cada valor distinto do campo de agrupamento. (Indexacao nivel unico - Pg 9)
3. **Índice Secundário:**
   - **O que é?** É um índice construído sobre qualquer campo que **não ordena** o arquivo de dados. Geralmente, usamos em chaves estrangeiras ou em campos que são frequentemente usados em buscas (ex: Nome de um cliente). (Indexacao nivel unico - Pg 11)
   - **Como funciona?** Como os dados **não estão ordenados** por este campo, o índice precisa ter um ponteiro para **cada um dos registros** da tabela. (Indexacao nivel unico - Pg 11)
   - **Característica Chave:** É um índice denso. Ele tem uma entrada de índice para cada registro no arquivo de dados. Por isso, ele é maior que um índice primário, mas ainda muito menor que o arquivo de dados original. Podemos ter vários índices secundários para uma mesma tabela. (Indexacao nivel unico - Pg 11/13)

### Lição 3: E se o "Catálogo" Também Ficar Gigante? (Indexação Multinível)
Para tabelas com milhões ou bilhões de registros, até mesmo o arquivo de índice pode se tornar grande demais para ser pesquisado rapidamente. A solução? **Criar um índice sobre o índice!**
- **Índice Estático:** Basicamente, você pega o seu índice de nível 1 (chamado de nível base), que já é ordenado, e cria um índice primário (esparso) sobre ele. Esse se torna o nível 2. Se o nível 2 ainda for grande, você cria o nível 3, e assim por diante, até que o último nível de índice caiba em um único bloco de disco. A busca se torna logarítmica, pois a cada passo você reduz drasticamente o espaço de busca. (IndexacaoMultiNivel - Pg 5/6)
- **Índice Dinâmico (Árvores B e B+):** A abordagem estática é ruim quando os dados mudam muito (inserções e deleções), pois exige reorganização constante22. As Árvores B e B+ são estruturas de dados em árvore, auto-balanceadas, que resolvem isso23232323. Elas são o padrão da indústria para implementação de índices em praticamente todos os bancos de dados relacionais modernos. Elas mantêm os dados ordenados e garantem que as buscas, inserções e remoções sejam extremamente eficientes, com uma complexidade de busca de O(log N). (IndexacaoMultiNivel - Pg 3/6/12/13)