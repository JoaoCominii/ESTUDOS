# HO09

## ENUNCIADO
Apresentar a blocagem (fator de bloco), o número de blocos necessários para armazenar o arquivo, o espaço desperdiçado por bloco em cada arquivo e o espaço total gasto para armazenar cada arquivo (tabela) presente no modelo relacional abaixo.

Considere que o tamanho de bloco de disco é de 2KB, que os arquivos possuem registros de tamanho fixo, não espalhados e que eles têm a seguinte configuração de número de registros e tamanhos de campos:
Atores (10.000 registros) → Codigo (16B), Nome (160B)
Clientes (100.000 registros) → CPF (11B), Nome (160B), Endereco (200B), Telefone (16B), DataNascimento (12B), Sexo (1B)
Filmes (2.000.000 registros) → Codigo (16B), Nome (160B), Genero (80B)
Funcionarios (3.500 registros) → CPF (11B), Nome (160B)
Midias (10.000.000 registros) → Identificador (24B), Tipo (8B), PrecoDiaria (24B)
Aluguel (20.000.000 registros)  → DataLocacao (12B), DataDevolucao (10B), ValorPagar (24B)
Pagamentos (50.000.000 registros) → Codigo (48B), Data (12B), Valor (24B)
AtoresEmFilmes (1.000.000 registros)
Observem a existência de chaves estrangeiras que obviamente devem ser consideradas como campos integrantes dos arquivos.

### R: 

**Blocagem (fator de bloco)(F):** é a quantidade de registros desse arquivo que cabem em um bloco de disco.
- Fator de bloco -> F = t/r
- r é o tamanho do registro ou tamanho médio de registros

**Espaço desperdiçado(U):** 
 - U = t - (F x r)

**Numero de blocos(B):** numero de blocos necessários para armazenar um arquivo
- B = n / F -> n é o número de registros do arquivo 

**Espaço total gasto**
- Espaço total = B x t

**Exemplo:**
considere um arquivo de Professor armazenado em um disco com
blocos de t = 4KB, onde:
- r = 185 B
- n = 10.000
Nesse caso teremos: 
- F = 4kB / 185B -> 4 x 1024 / 185 = 22.14 -> 22B
- U = 4KB - (22 x 185) -> 4096B - 4070B = 26B
- B = 10.000 / 22 = 455

# SOLUÇÂO
## ATORES
- t = 2KB (2 x 1024 = 2048)
- n = 10.000
- r = 176B
Nesse caso teremos: 
- F = 2KB / 176B -> 2048 / 176 = 11 Registros por bloco
- B = 10.000 / 11 = 910 Blocos necessários 
- U = 2KB - (11 x 176) = 112B 
- Espaço total gasto = B x t = 910 x 2048 = 1.863.680B

## CLIENTES
- t = 2KB (2048B)
- n = 100.000
- r = CPF(11) + Nome(160) + Endereco(200) + Telefone(16) + DataNascimento(12) + Sexo(1) = 400B
Nesse caso teremos: 
- F = 2048 / 400 = 5 Registros por bloco
- B = 100.000 / 5 = 20.000 Blocos necessários 
- U = 2048 - (5 x 400) = 48B 
- Espaço total gasto = 20.000 x 2048 = 40.960.000B

## FILMES
- t = 2KB (2048B)
- n = 2.000.000
- r = Codigo(16) + Nome(160) + Genero(80) = 256B
Nesse caso teremos: 
- F = 2048 / 256 = 8 Registros por bloco
- B = 2.000.000 / 8 = 250.000 Blocos necessários 
- U = 2048 - (8 x 256) = 0B 
- Espaço total gasto = 250.000 x 2048 = 512.000.000B

## FUNCIONARIOS
- t = 2KB (2048B)
- n = 3.500
- r = CPF(11) + Nome(160) + CPF_Supervisor(11) = 182B
Nesse caso teremos: 
- F = 2048 / 182 = 11 Registros por bloco
- B = 3.500 / 11 = 319 Blocos necessários (arredondado para cima)
- U = 2048 - (11 x 182) = 46B 
- Espaço total gasto = 319 x 2048 = 653.312B

## MIDIAS
- t = 2KB (2048B)
- n = 10.000.000
- r = Identificador(24) + Tipo(8) + PrecoDiaria(24) + CodFilme(16) = 72B
Nesse caso teremos: 
- F = 2048 / 72 = 28 Registros por bloco
- B = 10.000.000 / 28 = 357.143 Blocos necessários (arredondado para cima)
- U = 2048 - (28 x 72) = 32B 
- Espaço total gasto = 357.143 x 2048 = 731.431.424B

## ALUGUEL
- t = 2KB (2048B)
- n = 20.000.000
- r = CPF_Cliente(11) + ID_Midia(24) + DataLocacao(12) + DataDevolucao(10) + ValorPagar(24) + CPF_Funcionario(11) = 92B
Nesse caso teremos: 
- F = 2048 / 92 = 22 Registros por bloco
- B = 20.000.000 / 22 = 909.091 Blocos necessários (arredondado para cima)
- U = 2048 - (22 x 92) = 24B 
- Espaço total gasto = 909.091 x 2048 = 1.861.818.368B

## PAGAMENTOS
- t = 2KB (2048B)
- n = 50.000.000
- r = Codigo(48) + CPF_Cliente(11) + ID_Midia(24) + DataLocacao(12) + Data(12) + Valor(24) = 131B
Nesse caso teremos: 
- F = 2048 / 131 = 15 Registros por bloco
- B = 50.000.000 / 15 = 3.333.334 Blocos necessários (arredondado para cima)
- U = 2048 - (15 x 131) = 83B 
- Espaço total gasto = 3.333.334 x 2048 = 6.826.668.544B

## ATORESEMFILMES
- t = 2KB (2048B)
- n = 1.000.000
- r = CodFilme(16) + CodAtor(16) = 32B
Nesse caso teremos: 
- F = 2048 / 32 = 64 Registros por bloco
- B = 1.000.000 / 64 = 15.625 Blocos necessários 
- U = 2048 - (64 x 32) = 0B 
- Espaço total gasto = 15.625 x 2048 = 32.000.000B